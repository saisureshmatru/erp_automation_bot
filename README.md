# ERP Attendance Automation Bot

A Python automation bot that simplifies daily employee check-in/check-out process for ERP systems. This bot automates the manual process of logging into the ERP portal, fetching geolocation, and marking attendance.

## ğŸš€ Features

- **Automated Login**: Secure login to ERP system using configurable credentials
- **Geolocation Simulation**: Mock GPS coordinates to satisfy location-based attendance requirements
- **Silent Operation**: Runs invisibly in background without browser window
- **Proof Generation**: Takes screenshots as evidence of successful attendance marking
- **Comprehensive Logging**: Detailed logs with timestamps for tracking execution
- **Windows Integration**: PowerShell script for seamless scheduling and notifications
- **Error Handling**: Automatic error screenshots for troubleshooting

## ğŸ“‹ Requirements

- Python 3.7 or higher
- Windows OS (for PowerShell scheduling features)
- Internet connection

## ğŸ› ï¸ Installation

### 1. Clone the Repository
```bash
git clone https://github.com/Saikumar-bali/erp_automation_bot.git
cd erp_automation_bot
```

### 2. Install Python Dependencies
```bash
pip install playwright
playwright install chromium
```

### 3. Configure Your Credentials
Edit `config.json` with your ERP credentials:

```json
{
    "username": "your_employee_id",
    "password": "your_password",
    "login_url": "https://erp.hippoclouds.com/login#login",
    "checkin_page_url": "https://erp.hippoclouds.com/app/employee-checkin/new-employee-checkin",
    "headless": true,
    "latitude": 17.7274680,
    "longitude": 83.3119580
}
```

**Configuration Details:**
- `username`: Your employee ID or username
- `password`: Your ERP password
- `headless`: Set to `false` for debugging (shows browser), `true` for silent operation
- `latitude`/`longitude`: GPS coordinates for location-based attendance

## ğŸƒâ€â™‚ï¸ Usage

### Manual Execution
```bash
python src/auto_attendance.py
```

### Silent Execution with Notifications (Windows)
```bash
powershell -ExecutionPolicy Bypass -File scripts/run_silent.ps1
```

## â° Scheduling

### ğŸš€ GitHub Actions (Recommended)

#### Step 1: Configure Repository Secrets
Go to your GitHub repository â†’ Settings â†’ Secrets and variables â†’ Actions â†’ New repository secret

Add the following secrets:
```
ERP_USERNAME=your_employee_id
ERP_PASSWORD=your_password
ERP_LOGIN_URL=https://erp.hippoclouds.com/login#login
ERP_CHECKIN_URL=https://erp.hippoclouds.com/app/employee-checkin/new-employee-checkin
LATITUDE=17.7274680
LONGITUDE=83.3119580
```

#### Step 2: Enable GitHub Actions
1. Go to Actions tab in your repository
2. Enable Actions if this is your first time
3. The workflow will automatically run at 8:30 AM UTC on weekdays
4. You can also trigger manually from the Actions tab

**âš ï¸ Important**: GitHub Actions runs on UTC time. Adjust the cron schedule in `.github/workflows/scheduled-attendance.yml` for your timezone.

#### Workflow Features:
- âœ… Automatic daily execution (weekdays at 8:30 AM UTC)
- ğŸ”’ Secure credential storage using GitHub Secrets
- ğŸ“Š Automatic artifact upload (logs, screenshots)
- ğŸ”” Failure notifications
- ğŸ¯ Manual trigger option

### Windows Task Scheduler
1. Open Task Scheduler
2. Create Basic Task
3. Set trigger for daily (e.g., 8:30 AM)
4. Action: Start a program
5. Program: `powershell.exe`
6. Arguments: `-ExecutionPolicy Bypass -File "D:\path\to\erp_automation_bot\scripts\run_silent.ps1"`

### Command Line Scheduling
```powershell
schtasks /create /tn "ERP Attendance Bot" /tr "powershell.exe -ExecutionPolicy Bypass -File 'D:\erp_automation_bot\scripts\run_silent.ps1'" /sc daily /st 08:30
```

## ğŸ“ Project Structure

```
erp_automation_bot/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ auto_attendance.py     # Main automation script
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ run_silent.ps1        # PowerShell wrapper for silent execution
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â””â”€â”€ scheduled-attendance.yml  # GitHub Actions workflow
â”œâ”€â”€ logs/                     # Screenshots and logs generated by bot
â”œâ”€â”€ config.json              # Configuration file (local use only)
â”œâ”€â”€ .gitignore               # Git ignore rules
â””â”€â”€ README.md                # This file
```

## ğŸ“Š Output Files

- **`attendance_log.txt`**: Detailed execution logs with timestamps
- **`logs/proof_YYYYMMDD_HHMMSS.png`**: Screenshot proof of successful attendance
- **`error_state.png`**: Debug screenshot if automation fails

## ğŸ”§ Troubleshooting

### Common Issues

1. **Login Failed**
   - Verify credentials in `config.json`
   - Check if ERP portal is accessible
   - Set `"headless": false` to debug visually

2. **Geolocation Not Working**
   - Verify coordinates are correct for your location
   - Check if ERP requires specific location

3. **Save Button Not Found**
   - ERP interface might have changed
   - Run with `"headless": false` to inspect current interface

### Debug Mode
Set `"headless": false` in `config.json` to see the browser automation process step-by-step.

## ğŸ”’ Security Notes

- âš ï¸ **Never commit `config.json` with real credentials to version control**
- âœ… **GitHub Actions stores credentials securely in repository secrets**
- Consider using environment variables for production deployments
- The bot stores screenshots in `logs/` folder - ensure this directory is secured
- GitHub Actions artifacts are retained for 30 days and accessible only to repository collaborators

## ğŸ¤ Contributing

1. Fork the repository
2. Create a feature branch
3. Commit your changes
4. Push to the branch
5. Create a Pull Request

## ğŸ“ License

This project is for educational and personal use only. Please ensure compliance with your organization's automation policies.

## âš ï¸ Disclaimer

This tool automates web interactions and should be used responsibly. Users are responsible for ensuring compliance with their employer's policies regarding automation tools. The author is not responsible for any misuse or consequences of using this automation bot.

## ğŸ› Bug Reports

If you encounter issues, please:
1. Check the troubleshooting section
2. Run with headless mode disabled to observe the behavior
3. Check logs in `attendance_log.txt`
4. Create an issue with detailed information

---

**Made with â¤ï¸ for simplifying daily routine tasks**